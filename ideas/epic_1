Epic 1 – Journaling View & App Shell Foundation

1. Goal

Establish the core application shell and implement the first functional feature: the Journal – Freeform entry flow. By the end of this epic, the app should provide a Material Design–inspired layout, a working navigation structure, and a complete “create journal entry → persist locally → view in list” loop.

⸻

2. Scope

This epic covers:
	1.	App Shell & Navigation
	•	Implement a root layout with:
	•	Top app bar (application name / placeholder).
	•	Bottom navigation aligned with the planned main views:
	•	Today
	•	Journal
	•	Emotions
	•	Exercises
	•	Profile
	•	Configure Vue Router with routes for:
	•	/today
	•	/journal
	•	/emotions
	•	/exercises
	•	/profile
	•	Each route initially renders a simple placeholder view, except for Journal which is part of this epic.
	2.	Design System Base (Material + Tailwind)
	•	Adopt Material Design 3 as the primary design language.
	•	Implement a minimal, reusable design system using:
	•	TailwindCSS for layout, spacing, and typography.
	•	A small set of shared, Material-inspired components, for example:
	•	AppButton with variants (e.g. filled, outlined, text, tonal).
	•	AppCard for key actions and list items.
	•	AppTopAppBar and AppBottomNav.
	•	Introduce theme tokens via CSS variables, wired into Tailwind configuration:
	•	--color-primary, --color-on-primary, --color-surface, --color-surface-variant, --color-outline, etc.
	•	Ensure buttons, cards, and navigation follow Material principles (rounded corners, elevation, hover/pressed states).
	3.	Journal Domain Model & Local Persistence
Data model (initial):

interface JournalEntry {
  id: string;          // UUID
  createdAt: string;   // ISO timestamp
  updatedAt: string;   // ISO timestamp
  title?: string;
  body: string;
  // Emotion tags and other metadata will be added in later epics.
}

	•	Define a repository interface for journal entries:

interface JournalRepository {
  getAll(): Promise<JournalEntry[]>;
  getById(id: string): Promise<JournalEntry | undefined>;
  create(
    data: Omit<JournalEntry, "id" | "createdAt" | "updatedAt">
  ): Promise<JournalEntry>;
  update(entry: JournalEntry): Promise<JournalEntry>;
  delete(id: string): Promise<void>;
}


	•	Implement a concrete repository using IndexedDB via Dexie.
	•	Implement a Pinia store useJournalStore that:
	•	Holds entries: JournalEntry[].
	•	Provides actions:
	•	loadEntries()
	•	createEntry(payload)
	•	updateEntry(entry)
	•	deleteEntry(id)
	•	Delegates persistence to the repository implementation.
	•	Ensure entries are loaded on app start or when the Journal view is mounted.

	4.	Journal View (Entry Point)
Route: /journal → JournalView
UI/behavior:
	•	Top app bar with title “Journal”.
	•	Central area with three large Material-style cards or buttons representing the main journal modes:
	•	Free form – active and fully implemented.
	•	Guided – visible, but placeholder (disabled or “Coming soon” behavior).
	•	Periodic – visible, but placeholder.
	•	Underneath these primary actions:
	•	If there are no entries:
	•	Display an empty state message (e.g. “Your journal entries will appear here.”).
	•	If entries exist:
	•	Display a vertical list of entries (most recent first).
	•	Each entry shown as a list item/card with:
	•	Title (or "Untitled entry" if empty).
	•	Creation date/time.
	•	A short preview: first 100 characters of the body text, with ellipsis ("...") if truncated.
	•	Clicking Free form:
	•	Navigates to the freeform editor route /journal/new.
	•	Clicking Guided / Periodic:
	•	For now, either:
	•	Show a non-interactive disabled state, or
	•	Show a non-blocking “Coming soon” hint.
	5.	Freeform Journal Editor
Route: /journal/new → JournalEditorView
UI/behavior:
	•	Top app bar:
	•	Back navigation (to /journal).
	•	Title such as “New entry”.
	•	Content:
	•	Title field (optional).
	•	Body field – multiline text area filling the available vertical space.
	•	Optional small text showing the current date/time.
	•	Actions:
	•	Save (primary filled button).
	•	Cancel (text or outlined button, or using back navigation).
Logic:
	•	On mount in “create mode”:
	    - Initialize local state with empty title/body.
	•	On Save:
	    - Validate that body is not empty.
	    - Call journalStore.createEntry({ title, body }).
	    - The store is responsible for:
	        - Generating id.
	        - Setting createdAt and updatedAt.
	        - Persisting via the repository.
	        - Navigate back to /journal.
	•	On Cancel:
	    - Navigate back to /journal without creating an entry.
	6.	Local-First Behavior
	•	Ensure that after creating an entry:
	    - Returning to /journal shows the newly created entry in the list.
	    - Refreshing the browser tab retains all previously created entries (loaded from IndexedDB).
	•	Optionally integrate the Vite PWA plugin so the application shell is installable and usable offline. Enabling PWA is not strictly required for this epic, but the local persistence must work regardless of network connectivity.
	7.	Tooling & Testing (Minimal)
	•	Ensure the project is configured with:
	    - ESLint (with Vue + TypeScript support).
	    - Prettier for consistent formatting.
	•	Add minimal automated tests:
	    - Unit tests (Vitest) for:
	        - useJournalStore basic behaviors:
	            - Creating an entry sets timestamps and appends to state.
            - JournalView:
                - Renders three primary action buttons/cards.
                - Renders correct empty state when there are no entries.
                - Renders entries list when entries exist.
            - JournalEditorView:
                - Invokes the store’s createEntry on save.

⸻

3. Out of Scope (for this Epic)
	•	Emotion tagging (emotion selector, 2×2 emotion grid).
	•	Guided and periodic journaling flows.
	•	Exercises view implementation beyond simple placeholder.
	•	Profile view implementation beyond simple placeholder.
	•	Questionnaires and AI-powered profile/insight features.
	•	Multi-device sync or cloud backup.
	•	Rich text formatting, attachments, or advanced editor features.

⸻

4. Success Criteria

The epic is considered complete when:
	1.	The app starts into a Material Design–inspired shell with top app bar and bottom navigation.
	2.	Navigation between /today, /journal, /emotions, /exercises, and /profile works.
	3.	The Journal view shows:
	•	Three primary actions (Free form, Guided, Periodic), with only Free form active.
	•	Either an empty state or a populated list of journal entries, depending on current data.
	4.	The Freeform editor allows the user to:
	•	Enter a title (optional) and body.
	•	Save an entry, which appears in the Journal list.
	•	Cancel and return without creating an entry.
	5.	Journal entries:
	•	Are stored in IndexedDB (or equivalent local storage).
	•	Are reloaded on page refresh.
	6.	Linting and tests run successfully (no failing unit tests, lint errors, or TypeScript errors).
